# presentation
最新リビジョン：r40

★issuesにご相談事項あり★

・環境(サーバ)：xammp
・DB情報：presentation_db_r4.sql

==================================================================================
以下、おおまかな進捗を記載

【済】ミニマム機能実装 (1.スライド、2.音声、3.同期)
　　 ⇒一旦完了。未完成部分は微調整部分で実装予定
 
　■発表者アイコン　編集機能★着手中★
 　⇒キャラメイク機能は保留、一旦画像をULする機能のみの実装にとどめる
 
　■微調整(後回しの実装箇所)


以下、進捗メモ
----------------------------------------------------------------------------------
【済】■ミニマム機能実装 (1.スライド、2.音声、3.同期) ⇒一旦完了。未完成部分は微調整部分で実装予定
-------------------------------------------------------------------------------------
1.スライド登録機能【完了】
【済】0)仮画面作成
【済】1)ファイルのアップロード
【済】2)DBに情報格納　(ajaxで投げ方がわからないので保留⇒画像名のみDBに保存、画像ファイルは/uploadフォルダに保存
【済】3)スライド表示
　　・画像ファイル名のみDB保存
　　・画像ファイル実態は/uploadに保存
【済】ajaxでのDB登録に修正予定　

2.音声登録機能【完了】
【済】0)画面作成
【済】1)音声録音(Web Audio API - record.jsを使用、録音部分は完成、現在のスライド枚数の表示機能追加)
　　【済】バグ：10s以上ULできない⇒upload_max_filesizeを2→100Mに変更、ファイルサイズ超過処理追加
【済】2)音声登録(1スライドごと、ajaxで音声データ投げる)　(ajax⇒voice_insert.phpに渡す)
3)DBに情報格納
　【済】・音声ファイル名のみDB保存
　【済】・音声ファイル実態は/upload_voiceに保存
  【済】スライドごとにaudioタグ表示(スライドごとに表示切り替え処理)
4)再生
　【済】・DB音声取得⇒表示処理(DBから情報取得、再生完了r15)
-------------------------

3.スライドと音声の同期制御
1)連続再生(スライドと音声を同期して同時再生する)
　【済】・再生/停止/一時停止ボタン
  【済】・再生/一時停止ボタン統合(youtubeのような操作を実装)
  【済】・audioタグシークバー同期処理との連動
  【済】・audioボタン一時無効処理(自動再生中)

----------------------------------------------------------
4.調整など
1)スライドDB登録方法修正(修正後、音声も)
⇒スライド1枚につき1レコード登録に変更
　【済】・スライド処理(slide_tableにslide_group、user_idを追加)
　【済】・音声処理処理(voice_tableにslide_group、user_idを追加)

2)スライダーバー(スライド全体)・・・音声or時間軸に同期
　【済】・スライダーバー設置(rangeslider.js)
　【済】・全体の音声時間取得処理(DBから取得する処理のみ)
  ・スライダーバー(全体)動作と同期
     【済】・自動再生同期
     【済】・スライド移動
     【済】・音声未登録時の処理　※ただし最後20ms前でスライダーがとまる⇒解消
     【済】・音声録音時の同期(全体の音声時間更新)
     【済】・スライダーバー(全体)を移動させたときと音声＆スライドの同期

【済】・スライド起動関数を関数化(2個ある)
【済】・自動再生時、音声未登録⇒音声ありスライドに切り替え時エラー⇒解消
　      Uncaught TypeError: Cannot read property 'currentTime' of null
【済】動作テスト＆バグ修正　
【済】スライド名＝ファイル名で登録


【済】3)音声ボタン統一(録音・再生)

4)スライド更新機能
 【済】・スライド一枚変更　(前スライドファイルは削除する)
 【済】・ファイル一括変更
　　　【済】・音声削除質問(一括削除、そのまま)⇒ダイアログで実装、音声削除実装済
  
5)音声更新機能
　・削除機能
　【済】・音声更新時の前回音声の削除処理
  【済】・音声削除処理(単体)
  　　　【済】・音声未登録時、非表示処理

6)初回スライドアップロードをドラッグ形式に変更(更新処理と切分けるため)
　【済】・ULボタン削除
　【済】・スライド＆音声データ未登録時の処理変更
 
 
------------------------------------------------------------------------------
■発表者アイコン　編集機能(キャラメイク機能は保留、一旦画像をULする機能のみの実装にとどめる)
-------------------------------------------------------------------------------------

0)検証・・・nスライド目のx秒という単位で変更できるようにする
【済】・icon_list作成(フォーマット作成)
【済】・アイコン表示切り替え処理　//スライダーバー(全体)設置関数　.onslide中に記載
【済】・アイコンUL取得処理　　　function icon_ul_get(this_files)
　　⇒スライド番号ごとに配列作成したほうが良い？★保留★
【済】・アイコンリスト更新関数　function icon_list_mk(icon_name)
　　⇒一旦完成。(バグは都度修正)

-----ここから---------------------★★
以下実装予定

1)iconの一覧表示or簡易スライダー形式
2)icon変更＆削除UI
3)iconリセットボタン
4)初期処理確認
5)テーブル作成
6)PHP送信＆DB登録処理
7)PHP受信＆初期表示


---------------------------------------------------------------------------------
■微調整(後回しの実装箇所)
---------------------------------------------------------------------------------

1)スライド更新頻度について【要質問】⇒issuesに記載はした。
　・スライド一枚削除処理★保留★
　⇒音声削除・スライド全更新
　・スライド一枚追加処理
　⇒スライド全更新

2)初回アップロード前、その他ボタン非表示⇒デザイン決定後実装予定★保留★
⇒スライド未アップロード時の音声録音無効処理(ここで吸収)

3)audioタグ修正⇒デザイン決定後着手予定★保留★

4)自動再生に妙な空き時間発生？target取得に時間がかかる？
⇒音声データの再生時間を指定してから再生するように変更後、発生しなくなった
⇒要テスト★保留★

5)音声データなしのとき
⇒デフォルト秒数入力欄の実装
⇒自動再生停止でよくない？★保留★

6)アップロード中の表示（ぐるぐる）
　グルグル周るアニメーションはただのアニメーションgifを
　まわしておけばいいので、簡単です。【え】

7)ファイルサイズ超過処理追加（スライド）

8)失敗時のエラー表示処理

9)スライド名変更処理

10)画面遷移図(簡易的なものでOK)
・画面遷移図
・シナリオ
・レイアウト(全体)

----------------------------------------------------------------------------------
・企画書のurl(最新版)：
  url: https://www.dropbox.com/s/6kr9ua1esrsr3zq/idea_28_tsukamoto_r6.ppt?dl=0

・計画(ガントチャート)：
  url: http://minna-de-gantt.com/gantt/main/?cid=Hf3wbfsWOC
　パスワード：gs28
